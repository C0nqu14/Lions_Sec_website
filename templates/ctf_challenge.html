{% extends "base.html" %}

{% block title %}{{ challenge.title }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-center py-5">
    <div class="col-12 col-md-10 col-lg-8">

        <h1 class="page-title text-center mb-2">
            <span class="highlight-red">//</span> {{ challenge.title }}
        </h1>
        <p class="text-muted text-center mb-4 pb-3 border-bottom">
            Detalhes do Desafio CTF
        </p>

        <div class="card p-4 mb-4 shadow-lg">
            
            <h2 class="h5 fw-bold mb-3 border-bottom pb-2">
                <i class="fas fa-scroll me-2"></i> Descrição
            </h2>
            
            <p class="text-body-secondary">{{ challenge.description }}</p>

            <div class="d-flex flex-wrap gap-3 pt-3 mt-3 border-top">
                <span class="badge bg-info text-dark fw-bold p-2">
                    <i class="fas fa-star me-1"></i> {{ challenge.points }} Pontos
                </span>
                
                <span class="badge p-2
                    {% if challenge.difficulty == 'Fácil' %}bg-success
                    {% elif challenge.difficulty == 'Médio' %}bg-warning text-dark
                    {% elif challenge.difficulty == 'Difícil' %}bg-danger
                    {% else %}bg-secondary
                    {% endif %}">
                    Dificuldade: {{ challenge.difficulty }}
                </span>
            </div>
            
            <hr class="mt-4 mb-3">

            {% if user_solved %}
                <div class="alert alert-success text-center fw-bold" role="alert">
                    <i class="fas fa-check-circle me-2"></i> Parabéns! Você já resolveu este desafio e ganhou os pontos.
                </div>
                
            {% else %}
                <h2 class="h5 fw-bold mb-3">
                    <i class="fas fa-flag me-2"></i> Submeter a Flag
                </h2>
                
                <form method="POST" action="{{ url_for('ctf_challenge', ctf_id=challenge.id) }}" class="row g-2">
                    <div class="col-12">
                        <label for="flag_input" class="form-label small text-muted">Insira a Flag Encontrada:</label>
                        <input 
                            type="text" 
                            id="flag_input" 
                            name="flag" 
                            placeholder="LIONS_SEC{sua_flag_aqui}" 
                            required 
                            class="form-control form-control-dark" 
                        />
                        <div class="form-text">A flag geralmente segue o formato `LIONS_SEC{...}`</div>
                    </div>
                    <div class="col-12 mt-3">
                        <button class="btn btn-primary w-100" type="submit">
                            <i class="fas fa-paper-plane me-2"></i> Submeter
                        </button>
                    </div>
                </form>
            {% endif %}
        </div>

        <div class="text-center mt-4">
            <a href="{{ url_for('ctfs') }}" class="text-muted text-decoration-none small">
                <i class="fas fa-arrow-left me-1"></i> Voltar para Lista de Desafios CTF
            </a>
        </div>
            
    </div>
</div>
{% endblock %}